{"version":3,"sources":["../../js/app.js"],"names":["ORGANIZATIONS","name","site_url","support_url","desc","date","date_string","BOX_FLAP","OPEN_CLASS","OPENED_CLASS","CAN_OPEN_CLASS","KEEP_CLOSED_CLASS","init","renderBoxes","$","on","e","preventDefault","removeClass","addClass","tabIndex","setTimeout","boxDate","parent","data","localStorage","setItem","DATE_AVAILABLE","find","text","closeModal","document","ESC_PRESSED","keyCode","MODAL_OPEN","hasClass","canOpen","timestamp","TODAY","Date","getTime","hasOpened","getItem","listItem","countdown","length","forEach","org","index","state","append","attr"],"mappings":"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","file":"app.js","sourcesContent":["// http://www.womenscollegehospital.ca/programs-and-services/crossroads-clinic\n\nconst ORGANIZATIONS = [\n    {\n        name: 'SKETCH',\n        site_url: 'http://sketch.ca/',\n        support_url: 'http://sketch.ca/support-sketch/',\n        desc: 'Support creative programs that empower impoverished, homeless, and marginalized youth',\n        date: 1481605200000,\n        date_string: 'December 13'\n    },\n    {\n        name: 'Romero House',\n        site_url: 'https://romerohouse.org/',\n        support_url: 'https://romerohouse.org/financial-donations/',\n        desc: 'Give financial or in-kind donations to a shelter that welcomes and supports refugees in Toronto',\n        date: 1481691600000,\n        date_string: 'December 14'\n    },\n    {\n        name: 'Native Canadian Centre of Toronto',\n        site_url: 'http://ncct.on.ca/',\n        support_url: 'http://ncct.on.ca/donations/',\n        desc: 'Make a donation to Toronto\\'s oldest Indigenous community organization',\n        date: 1481778000000,\n        date_string: 'December 15'\n    },\n    {\n        name: 'Sistering',\n        site_url: 'http://www.sistering.org/',\n        support_url: 'http://www.sistering.org/Ways_to_Give/Ways_to_Give.aspx',\n        desc: 'Drop off clothes, toiletries, or even grocery gift cards for women who are homeless or facing the risk of becoming homeless',\n        date: 1481950800000,\n        date_string: 'December 16'\n    },\n    {\n        name: 'Rainbow Railroad',\n        site_url: 'http://rainbowrailroad.ca/',\n        support_url: 'http://rainbowrailroad.ca/donate',\n        desc: 'Donate funds or your aeroplan miles to help LGBT individuals seeking asylum in Canada',\n        date: 1482037200000,\n        date_string: 'December 17'\n    },\n    {\n        name: 'Centre for Addiction and Mental Health',\n        site_url: 'http://www.camh.ca/en/hospital/Pages/home.aspx',\n        support_url: 'http://give.camh.ca/site/PageNavigator/giftsoflight_2013_home?_ga=1.180121700.1112915103.1480777939',\n        desc: 'Look through their Gifts of Light catelogue and select a gift that can enrich the life of a CAMH patient',\n        date: 1482123600000,\n        date_string: 'December 18'\n    },\n    {\n        name: 'Native Women\\'s Resource Centre',\n        site_url: 'http://nwrct.ca/',\n        support_url: 'http://nwrct.ca/get-involved/support-nwrct/',\n        desc: 'Give financial or in-kind donations to support urban Indigenous women and their families',\n        date: 1482210000000,\n        date_string: 'December 19'\n    },\n    {\n        name: 'The 519',\n        site_url: 'http://www.the519.org/',\n        support_url: 'http://www.the519.org/support-the-519',\n        desc: 'Get involved with a long-standing agency that builds an inclusive and empowering space for Toronto\\'s LGBTQ2IA community',\n        date: 1482296400000,\n        date_string: 'December 20'\n    },\n    {\n        name: 'LOFT Community Services',\n        site_url: 'http://www.loftcs.org/',\n        support_url: 'http://www.loftcs.org/support-loft/ways-to-give/',\n        desc: 'Make a donation to provide safe and stable housing and mental health services for people in marginalized or vulnerable circumstances',\n        date: 1482382800000,\n        date_string: 'December 21'\n    },\n    {\n        name: 'The Gatehouse',\n        site_url: 'http://thegatehouse.org/',\n        support_url: 'https://www.canadahelps.org/en/charities/the-gatehouse-child-abuse-investigation-support-site/',\n        desc: 'Support a safe space for people affected by childhood abuse',\n        date: 1482469200000,\n        date_string: 'December 22'\n    },\n    {\n        name: 'Na-Me-Res',\n        site_url: 'http://www.nameres.org/',\n        support_url: 'http://www.nameres.org/support/',\n        desc: 'Contribute funds, clothing, or toiletries to improve the lives of Aboriginal men in Toronto',\n        date: 1482555600000,\n        date_string: 'December 23'\n    },\n    {\n        name: 'The Stop Community Food Centre',\n        site_url: 'http://thestop.org/',\n        support_url: 'http://thestop.org/get-involved/give-gifts-that-matter/',\n        desc: 'Donate $35 to provide a hamper full of healthy food to a family in the Davenport West community',\n        date: 1482642000000,\n        date_string: 'December 24'\n    }\n];\n\nconst BOX_FLAP = 'box-flap';\nconst OPEN_CLASS = `${BOX_FLAP}--open`;\nconst OPENED_CLASS = `${BOX_FLAP}--opened`;\nconst CAN_OPEN_CLASS = `${BOX_FLAP}--can-open`;\nconst KEEP_CLOSED_CLASS = `${BOX_FLAP}--keep-closed`;\n\nfunction init() {\n    renderBoxes();\n    $(`.${CAN_OPEN_CLASS}`).on('click', function(e) {\n        e.preventDefault();\n        $(this).removeClass(CAN_OPEN_CLASS).addClass(OPEN_CLASS);\n        this.tabIndex = -1;\n        setTimeout(() => {\n            $(this).addClass(OPENED_CLASS);\n        }, 350);\n\n        const boxDate = $(this).parent().data('date');\n        localStorage.setItem(`days_of_giving_${boxDate}`, 'opened');\n    });\n    $(`.${KEEP_CLOSED_CLASS}`).on('click', function(e) {\n        const DATE_AVAILABLE = $(this).find(`.${BOX_FLAP}__date`).text();\n        $('.modal__message-date').text(DATE_AVAILABLE);\n        $('.modal-wrapper').addClass('modal-wrapper--show');\n        $('body').addClass('disable-scroll');\n    });\n    $('.modal__close').on('click', closeModal);\n    $('.modal-wrapper').on('click', closeModal);\n\n    $(document).on('keyup', function(e) {\n        const ESC_PRESSED = e.keyCode === 27;\n        const MODAL_OPEN = $('.modal-wrapper').hasClass('modal-wrapper--show');\n        if (!MODAL_OPEN && ESC_PRESSED) {\n            return;\n        }\n        closeModal();\n    });\n}\n\nfunction closeModal(e) {\n    $('.modal-wrapper').removeClass('modal-wrapper--show');\n    $('body').removeClass('disable-scroll');\n}\n\nfunction canOpen(timestamp) {\n    const TODAY = new Date().getTime();\n    return TODAY >= timestamp;\n}\n\nfunction hasOpened(timestamp) {\n    return localStorage.getItem(`days_of_giving_${timestamp}`);\n}\n\nfunction renderBoxes() {\n    let listItem = '';\n    let countdown = ORGANIZATIONS.length;\n\n    ORGANIZATIONS.forEach((org, index) => {\n        let state;\n\n        if (hasOpened(org.date)) {\n            state = `${OPEN_CLASS} ${OPENED_CLASS}`;\n        }\n        else if (canOpen(org.date)) {\n            state = CAN_OPEN_CLASS;\n        }\n        else {\n            state = KEEP_CLOSED_CLASS;\n        }\n\n        listItem = `<li class=\"box\" data-date=\"${org.date}\">\n                        <button class=\"${BOX_FLAP} ${state}\">\n                            <div class=\"box-flap-wrapper\">\n                                <h2>\n                                    <strong class=\"box-flap__countdown\"><span>${countdown}</span></strong>\n                                    <em class=\"box-flap__date\">${org.date_string}</em>\n                                </h2>\n                            </div>\n                        </button>\n                        <div class=\"box-content\">`\n\n                        if (state !== KEEP_CLOSED_CLASS) {\n                            listItem += `<div class=\"box-content__info\">\n                                <h3 class=\"box-content__name\">${org.name}</h3>\n                                <p class=\"box-content__description\">${org.desc}</p>\n                            </div>\n                            <ul class=\"box-links\">\n                                <li>\n                                    <a href=\"${org.site_url}\" class=\"control  control--underline\">Visit Site</a>\n                                </li>\n                                <li>\n                                    <a href=\"${org.support_url}\" class=\"control control--button\">Support</a>\n                                </li>\n                            </ul>`\n                        }\n\n                        listItem += `</div></li>`;\n\n        $('.boxes').append(listItem);\n        $('.box-flap-opened').attr('tabIndex', -1);\n        countdown -= 1;\n    });\n}\n\n$(function() {\n    init();\n});\n"]}