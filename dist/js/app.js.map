{"version":3,"sources":["../../js/app.js"],"names":["ORGANIZATIONS","name","site_url","support_url","desc","date","date_string","init","renderBoxes","$","on","e","preventDefault","addClass","tabIndex","setTimeout","removeClass","boxDate","parent","data","localStorage","setItem","DATE_AVAILABLE","find","text","closeModal","document","ESC_PRESSED","keyCode","MODAL_OPEN","hasClass","canOpen","timestamp","TODAY","Date","getTime","hasOpened","getItem","listItem","countdown","length","forEach","org","index","state","append","attr"],"mappings":"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","file":"app.js","sourcesContent":["// http://www.womenscollegehospital.ca/programs-and-services/crossroads-clinic\n\nconst ORGANIZATIONS = [\n    {\n        name: 'SKETCH',\n        site_url: 'http://sketch.ca/',\n        support_url: 'http://sketch.ca/support-sketch/',\n        desc: 'Support creative programs that empower impoverished, homeless, and marginalized youth',\n        date: 1481605200000,\n        date_string: 'December 13'\n    },\n    {\n        name: 'Romero House',\n        site_url: 'https://romerohouse.org/',\n        support_url: 'https://romerohouse.org/financial-donations/',\n        desc: 'Give financial or in-kind donations to a shelter that welcomes and supports refugees in Toronto',\n        date: 1481691600000,\n        date_string: 'December 14'\n    },\n    {\n        name: 'Native Canadian Centre of Toronto',\n        site_url: 'http://ncct.on.ca/',\n        support_url: 'http://ncct.on.ca/donations/',\n        desc: 'Make a donation to Toronto\\'s oldest Indigenous community organization',\n        date: 1481778000000,\n        date_string: 'December 15'\n    },\n    {\n        name: 'Sistering',\n        site_url: 'http://www.sistering.org/',\n        support_url: 'http://www.sistering.org/Ways_to_Give/Ways_to_Give.aspx',\n        desc: 'Drop off clothes, toiletries, or even grocery gift cards for women who are homeless or facing the risk of becoming homeless',\n        date: 1481950800000,\n        date_string: 'December 16'\n    },\n    {\n        name: 'Rainbow Railroad',\n        site_url: 'http://rainbowrailroad.ca/',\n        support_url: 'http://rainbowrailroad.ca/donate',\n        desc: 'Donate funds or your aeroplan miles to help LGBT individuals seeking asylum in Canada',\n        date: 1482037200000,\n        date_string: 'December 17'\n    },\n    {\n        name: 'Centre for Addiction and Mental Health',\n        site_url: 'http://www.camh.ca/en/hospital/Pages/home.aspx',\n        support_url: 'http://give.camh.ca/site/PageNavigator/giftsoflight_2013_home?_ga=1.180121700.1112915103.1480777939',\n        desc: 'Look through their Gifts of Light catelogue and select a gift that can enrich the life of a CAMH patient',\n        date: 1482123600000,\n        date_string: 'December 18'\n    },\n    {\n        name: 'Native Women\\'s Resource Centre',\n        site_url: 'http://nwrct.ca/',\n        support_url: 'http://nwrct.ca/get-involved/support-nwrct/',\n        desc: 'Give financial or in-kind donations to support urban Indigenous women and their families',\n        date: 1482210000000,\n        date_string: 'December 19'\n    },\n    {\n        name: 'The 519',\n        site_url: 'http://www.the519.org/',\n        support_url: 'http://www.the519.org/support-the-519',\n        desc: 'Get involved with a long-standing agency that builds an inclusive and empowering space for Toronto\\'s LGBTQ2IA community',\n        date: 1482296400000,\n        date_string: 'December 20'\n    },\n    {\n        name: 'LOFT Community Services',\n        site_url: 'http://www.loftcs.org/',\n        support_url: 'http://www.loftcs.org/support-loft/ways-to-give/',\n        desc: 'Make a donation to provide safe and stable housing and mental health services for people in marginalized or vulnerable circumstances',\n        date: 1482382800000,\n        date_string: 'December 21'\n    },\n    {\n        name: 'The Gatehouse',\n        site_url: 'http://thegatehouse.org/',\n        support_url: 'https://www.canadahelps.org/en/charities/the-gatehouse-child-abuse-investigation-support-site/',\n        desc: 'Support a safe space for people affected by childhood abuse',\n        date: 1482469200000,\n        date_string: 'December 22'\n    },\n    {\n        name: 'Na-Me-Res',\n        site_url: 'http://www.nameres.org/',\n        support_url: 'http://www.nameres.org/support/',\n        desc: 'Contribute funds, clothing, or toiletries to improve the lives of Aboriginal men in Toronto',\n        date: 1482555600000,\n        date_string: 'December 23'\n    },\n    {\n        name: 'The Stop Community Food Centre',\n        site_url: 'http://thestop.org/',\n        support_url: 'http://thestop.org/get-involved/give-gifts-that-matter/',\n        desc: 'Donate $35 to provide a hamper full of healthy food to a family in the Davenport West community',\n        date: 1482642000000,\n        date_string: 'December 24'\n    }\n];\n\nfunction init() {\n    renderBoxes();\n    $('.box-flap.can-open').on('click', function(e) {\n        e.preventDefault();\n        $(this).addClass('open');\n        this.tabIndex = -1;\n        setTimeout(() => {\n            $(this).addClass('opened').removeClass('can-open');\n        }, 350);\n\n        const boxDate = $(this).parent().data('date');\n        localStorage.setItem(`days_of_giving_${boxDate}`, 'opened');\n    });\n    $('.box-flap.keep-closed').on('click', function(e) {\n        const DATE_AVAILABLE = $(this).find('.date').text();\n        $('.modal-message-date').text(DATE_AVAILABLE);\n        $('.modal-wrapper').addClass('show');\n        $('body').addClass('disable-scroll');\n    });\n    $('.close-modal').on('click', closeModal);\n    $('.modal-wrapper').on('click', closeModal);\n\n    $(document).on('keyup', function(e) {\n        const ESC_PRESSED = e.keyCode === 27;\n        const MODAL_OPEN = $('.modal-wrapper').hasClass('show');\n        if (!MODAL_OPEN && ESC_PRESSED) {\n            return;\n        }\n        closeModal();\n    });\n}\n\nfunction closeModal(e) {\n    $('.modal-wrapper').removeClass('show');\n    $('body').removeClass('disable-scroll');\n}\n\nfunction canOpen(timestamp) {\n    const TODAY = new Date().getTime();\n    return TODAY >= timestamp;\n}\n\nfunction hasOpened(timestamp) {\n    return localStorage.getItem(`days_of_giving_${timestamp}`);\n}\n\nfunction renderBoxes() {\n    let listItem = '';\n    let countdown = ORGANIZATIONS.length;\n\n    ORGANIZATIONS.forEach((org, index) => {\n        let state;\n\n        if (hasOpened(org.date)) {\n            state = 'open opened';\n        }\n        else if (canOpen(org.date)) {\n            state = 'can-open';\n        }\n        else {\n            state = 'keep-closed';\n        }\n\n        listItem = `<li class=\"box\" data-date=\"${org.date}\" data-string-date=\"${org.date_string}\">\n                        <button class=\"box-flap ${state}\">\n                            <div class=\"box-flap-wrapper\">\n                                <h2>\n                                    <strong class=\"countdown\"><span>${countdown}</span></strong>\n                                    <em class=\"date\">${org.date_string}</em>\n                                </h2>\n                            </div>\n                        </button>\n                        <div class=\"box-content\">`\n\n                        if (state !== 'keep-closed') {\n                            listItem += `<div class=\"info\">\n                                <h3 class=\"name\">${org.name}</h3>\n                                <p class=\"description\">${org.desc}</p>\n                            </div>\n                            <ul class=\"links\">\n                                <li>\n                                    <a href=\"${org.site_url}\" class=\"link site-url\">Visit Site</a>\n                                </li>\n                                <li>\n                                    <a href=\"${org.support_url}\" class=\"link support-url\">Support</a>\n                                </li>\n                            </ul>`\n                        }\n\n                        listItem += `</div></li>`;\n\n        $('.boxes').append(listItem);\n        $('.opened').attr('tabIndex', -1);\n        // $('.keep-closed').attr('disabled', true);\n        countdown -= 1;\n    });\n}\n\n$(function() {\n    init();\n});\n"]}